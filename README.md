# pixel-tools
This is a set of utilities useful for pixel art

## Fontpack

A CLI tool for creating packed texture atlases and [BMFont](https://www.angelcode.com/products/bmfont/)
character description files from pixel art font sheets. It automates glyph extraction,
atlas packing, and coordinate mapping.

### Features

- Trims empty space around glyphs to minimize atlas size.
- Automatically calculates line height and offsets for consistent baseline alignment.
- Packs multiple fonts into a single texture atlas.
- Generates XML-based `.bmfont` files, which can loaded directly by Phaser game engine.

### Usage

```bash
fontpack <font-config.yaml> <output-dir>
```

The tool expects a YAML configuration file and a directory where it can find
source PNG images (named after the font's `name` property). It outputs:
- `fonts.png`: A packed texture atlas containing all glyphs.
- `<font_name>.bmfont`: Individual XML descriptor files for each font.

### Configuration Example

```yaml
# Name of the font. In this case awesome.png will be searched in the same
# folder, where this config.yaml is located, and awesome.bmfont will be generated
# in the output directory
- name: awesome
  # Font cell width and height in the source image in pixels
  size: 16
  # Space between lines in pixels. Line height will be calculated automatically
  # as a height of the biggest character plus line_spacing
  line_spacing: 1
  # Space between letters in pixels
  letter_spacing: 1
  # Width of the space character in pixels
  space_width: 4
  # List of characters to include in the font. Positions of the letters
  # in this list should correspond to positions of letters in the source image
  letters:
    - "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    - "abcdefghijklmnopqrstuvwxyz"
    - "0123456789!\"#$%&'()*+,-./:"
# Name of another font to include in the atlas.
- name: another
  size: 16
  line_spacing: 1
# ...and so on
```

For a more detailed example, please see the [example folder](cmd/fontpack/example), which
contains both an example font config with source font images, and an [output](cmd/fontpack/example/expected_output)
expected to be generated by the tool.

## Tilepack

A CLI tool for repacking and optimizing [Tiled](https://www.mapeditor.org)
map files (*.tmx) and their associated tilesets. The tool analyzes tile usage
in maps and creates optimized tilesets containing only the tiles that are
actually used in the maps.

### Features

- Analyzes TMX map files to identify used tiles
- Creates optimized tilesets by removing unused tiles
- Preserves tile properties and object layers
- Supports PNG image format for tilesets
- Handles both embedded and external tilesets
- Packs differently-sized object layer tiles into separate atlas
- Outputs JSON tilemaps and sprite atlases that integrate seamlessly with phaser.io engine

### Usage

```bash
tilepack <source-folder> <destination-folder>
```

This command will:
1. Recursively scan all `.tmx` files in the source folder
2. Generate optimized output in the destination folder:
    - JSON tilemaps and atlas mappings (compatible with Phaser.io engine)
    - Compressed PNG files with only used tiles and sprites

Example input and output structures:
```
source/
├── episode1/
│ ├── level1.tmx
│ └── level2.tmx
├── episode2/
│ └── level1.tmx
└── tilesets/
  ├── terrain.png
  └── trees.png

destination/
├── episode1/
│ ├── level1.tmj
│ ├── level1.png
│ ├── level1.atlas
│ ├── level2.tmj
│ ├── level2.png
│ └── level2.atlas
└── episode2/
  ├── level1.tmj
  ├── level1.png
  └── level1.atlas
```

## Recolor

A simple CLI tool for color conversion between images using a color lookup
table (LUT). It has two main functions:

1. Building a LUT by analyzing pairs of source and target images to learn color mappings
2. Applying the LUT to convert new images from source to target color style

The tool was originally developed to convert [Time Fantasy](https://itch.io/c/201945/time-fantasy-rpg-asset-packs)
tilesets to match the SNES-style colors of [Time Elements](https://itch.io/c/3379349/time-elements-snes-style-game-assets)
assets (both created by [finalbossblues](https://finalbossblues.itch.io/)).
However, it can be used for any image color conversion where you have example
pairs showing the desired color mapping.

A pre-built [LUT file](recolor/tf_to_e.lut) is included for Time Fantasy to
Time Elements conversion. Please see the example [config file](recolor/recolor-config.yaml)
for details on all available options.

## Terms of use

### Code

All tools are free to download and use for any purpose, including commercial
projects. Full source code is available on GitHub under GPL3 license, which
means you're also free to modify and redistribute these tools - the main
restriction is that if (and only if) you're redistributing modified versions,
you must also provide source code of your modifications to your customers.
See the file [LICENSE](https://github.com/skhoroshavin/phaser-pixui/blob/main/LICENSE)
for the full license text.

### Example art assets

The example project included in this repository uses pixel art assets created
by Gabriel Lima aka [tiopalada](https://tiopalada.itch.io), with small modifications
by me. Big thanks to him for creating beautiful pixel art and putting it into the
public domain. His work is licensed under [CC0 1.0 Universal](https://creativecommons.org/publicdomain/zero/1.0/),
and [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/), for details
please see LICENSE files in corresponding example folders.
